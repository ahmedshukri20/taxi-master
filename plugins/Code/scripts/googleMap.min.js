"use strict";const METERS_IN_KM=1e3,SECONDS_IN_MINUTE=60,MINUTES_IN_HOUR=60;var directionsRenderer,googleMap,marker,locationCounter=0,lastLocationTextBox=null,distanceInKM=0,totalFare=0,travelPrice=0,mins=0,hrs=0,priceCalculated=!1,countryFare=null,fareList={France:{currency:"€",startingPrice:9,pricePerKm:1.5},Germany:{currency:"€",startingPrice:9,pricePerKm:1.5},"United Kingdom":{currency:"£",startingPrice:8,pricePerKm:1.4},Netherlands:{currency:"€",startingPrice:3.6,pricePerKm:2.65},Belgium:{currency:"€",startingPrice:18,pricePerKm:2.4}};function initializeMap(){displayInitialLocations();new google.maps.LatLng(33.7294,73.0931)}function addAutoComplete(e){$("#"+e).focus((function(){lastLocationTextBox=e}));var t=new google.maps.places.Autocomplete(document.getElementById(e));t.addListener("place_changed",(function(){var a=t.getPlace(),n=getCountry(a);$("#"+e).data("lat",a.geometry.location.lat()),$("#"+e).data("lng",a.geometry.location.lng()),$("#"+e).data("country",n),priceCalculated=!1,marker&&(marker.setMap(null),marker=null)}))}function getCountry(e){let t=null;for(const a of e.address_components){for(const e of a.types){if("country"===e)t=a.long_name;if(t)break}if(t)break}return t}function addLocationBox(e,t){$("#locations").append('<div class="form-group" id="'+e+'Fields"><label for="'+e+'" class="sr-only">Location</label><input id="'+e+'" type="text" placeholder='+t+' class="location-box form-control form-control-lg" /></div>')}function addSecondLocationBox(e,t){$("#location2").append('<div class="col-md-6 agileits-btm-spc form-text2 dates-wrap" required><label for="'+e+'" class="sr-only">Location</label><input id="'+e+'" type="text" name="'+e+'" placeholder='+t+' class="location-box form-control form-control-lg" /></div>')}function removeLocation(e){$("#"+e).remove(),priceCalculated=!1}function displayInitialLocations(){var e;addLocationBox(e="txtLocation"+ ++locationCounter,"Van"),addAutoComplete(e),addLocationBox(e="txtLocation"+ ++locationCounter,"Naar"),addAutoComplete(e),addSecondLocationBox(e="txtLocation"+ ++locationCounter,"Van"),addAutoComplete(e),addSecondLocationBox(e="txtLocation"+ ++locationCounter,"Naar"),addAutoComplete(e)}$(document).ready((function(){$("#fareDetails").hide(),$("#btnClearDirections").click((function(){confirm("Are you sure you want to clear all locations?")&&($("#fareDetails").hide(),priceCalculated=!1,distanceInKM=0,totalFare=0,travelPrice=0,mins=0,hrs=0,directionsRenderer&&directionsRenderer.setMap(null),$("#frmLocation").get(0).reset(),$("#locations").empty(),locationCounter=0,displayInitialLocations(),marker&&(marker.setMap(null),marker=null))})),$("#btnAddLocation").click((function(){var e="txtLocation"+ ++locationCounter;addLocationBox(e),addAutoComplete(e),priceCalculated=!1})),$("#btnGetJson").click((function(){if(priceCalculated){var e=[];$('#locations input[type="text"]').each((function(t,a){var n={address:$(a).val(),lat:$(a).data("lat"),lng:$(a).data("lng")};e.push(n)}));var t={locations:e,distanceInKM:distanceInKM,startingPrice:countryFare.startingPrice,travelPrice:travelPrice,totalFare:totalFare,mins:mins,hrs:hrs};alert(JSON.stringify(t))}else alert("Please calculate the fare first.")})),$("#btnCalculateFare").click((function(){directionsRenderer&&directionsRenderer.setMap(null),marker&&(marker.setMap(null),marker=null),$("#fareDetails").hide();var e=new google.maps.DirectionsService;directionsRenderer=new google.maps.DirectionsRenderer({map:googleMap,draggable:!1});var t,a=null,n=null,o=[],r=!0,i=0;if($('#locations input[type="text"]').each((function(e,t){if(i++,""===$(t).val().trim())return alert("Please enter location."),$(t).focus(),r=!1,!1;if(0===e)a=$(t).data("lat")+" "+$(t).data("lng");else{if(null!==n){var l={location:n,stopover:!0};o.push(l)}n=$(t).data("lat")+" "+$(t).data("lng");var c=null;$(t).data("country")!=c&&!0}c=$(t).data("country")})),t=n,r)if(0!==i)if(1!==i)if(null in fareList){var l=fareList.null,c={origin:a,destination:t,travelMode:google.maps.TravelMode.DRIVING,waypoints:o,optimizeWaypoints:$("#chkOptimizePath").is(":checked")};e.route(c,(function(e,t){if(t==google.maps.DirectionsStatus.OK){directionsRenderer.setDirections(e);for(var a=0,n=0,o=0;o<e.routes[0].legs.length;o++){var r=e.routes[0].legs[o];a+=r.distance.value,n+=r.duration.value}distanceInKM=a/1e3;var i=n/60,c=i/60;travelPrice=l.pricePerKm*distanceInKM,totalFare=l.startingPrice+travelPrice;var s="";mins=0,hrs=0,c<1?s=(mins=i.toFixed(0))+" minute"+(mins>1?"n":""):(mins=(i%60).toFixed(0),s=(hrs=Math.floor(c))+"uur, "+mins+" minute"+(mins>1?"n":"")),$("#distance").text(distanceInKM.toFixed(2)+" KM"),$("#duration").text(s),$("#startingPrice").text(l.currency+l.startingPrice.toFixed(2)),$("#travelPrice").text(l.currency+travelPrice.toFixed(2)),$("#fare").text(l.currency+totalFare.toFixed(2)),$("#totalFare").text(l.currency+totalFare.toFixed(2)),$("#fareDetails").show(),priceCalculated=!0}else alert("We could not find any result for your search.")}))}else alert("Sorry, we provide services in the following countries only:\nFrance\nGermany\nUnited Kingdom\nNetherlands\nBelgium");else alert("Please add destination location.");else alert("Please add source and destination locations.")}))})),google.maps.event.addDomListener(window,"load",initializeMap);